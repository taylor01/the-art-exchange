<% content_for :title, "Accept Terms of Service" %>
<% content_for :meta_description, "Please review and accept our updated Terms of Service to continue using The Art Exchange." %>

<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="bg-white rounded-lg shadow-sm border border-stone-200 p-8">
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-stone-900 mb-4">Accept Updated Terms of Service</h1>
      
      <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6">
        <div class="flex items-start">
          <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-amber-400" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
            </svg>
          </div>
          <div class="ml-3">
            <h3 class="text-sm font-medium text-amber-800">Terms Update Required</h3>
            <div class="mt-2 text-sm text-amber-700">
              <p>Our Terms of Service have been updated. Please review the changes and accept the new terms to continue using The Art Exchange.</p>
              <% if @user_terms_version.present? %>
                <p class="mt-2"><strong>Your current version:</strong> <%= @user_terms_version %></p>
              <% else %>
                <p class="mt-2">You have not yet accepted any terms version.</p>
              <% end %>
              <p><strong>New version:</strong> <%= @current_terms_version %></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Terms Content -->
    <div class="prose prose-stone max-w-none mb-8">
      <p class="text-lg text-stone-600 mb-6">
        <strong>Last Updated:</strong> <%= Date.current.strftime("%B %d, %Y") %>
      </p>

      <p class="mb-6">
        Welcome to The Art Exchange. These Terms of Service ("Terms") govern your use of our website and services. By accessing or using The Art Exchange, you agree to be bound by these Terms.
      </p>

      <h2 class="text-2xl font-semibold text-stone-900 mt-8 mb-4">1. Permitted Use</h2>
      <p class="mb-4">
        The Art Exchange is designed exclusively for art poster collection, trading, discovery, and community engagement. You may use our platform to:
      </p>
      <ul class="list-disc pl-6 mb-4">
        <li>Browse and discover art posters and related artwork</li>
        <li>Manage your personal poster collection</li>
        <li>Connect with other collectors and art enthusiasts</li>
        <li>Share information about posters, artists, and venues</li>
        <li>Participate in community discussions related to art and collecting</li>
      </ul>

      <h2 class="text-2xl font-semibold text-stone-900 mt-8 mb-4">2. Prohibited Activities</h2>
      <p class="mb-4">
        You agree NOT to use The Art Exchange for any purpose other than those explicitly permitted above. Specifically prohibited activities include:
      </p>
      <ul class="list-disc pl-6 mb-4">
        <li><strong>Data Mining/Scraping:</strong> Automated extraction of data, content, or user information</li>
        <li><strong>Commercial Exploitation:</strong> Using platform data for commercial purposes without express permission</li>
        <li><strong>Spam or Harassment:</strong> Sending unsolicited messages or engaging in harassment</li>
        <li><strong>False Information:</strong> Providing inaccurate poster descriptions, pricing, or personal information</li>
        <li><strong>Copyright Infringement:</strong> Uploading or sharing copyrighted content without permission</li>
        <li><strong>System Interference:</strong> Attempting to disrupt or compromise platform security</li>
        <li><strong>Multiple Accounts:</strong> Creating multiple accounts to circumvent platform rules</li>
      </ul>

      <!-- Continue with all terms content... truncated for brevity -->
      <!-- In a real implementation, you'd include all the terms sections here -->

      <p class="text-sm text-stone-500 mt-8 pt-4 border-t border-stone-200">
        For the complete terms, please visit our <a href="<%= terms_of_service_path %>" class="text-red-600 hover:text-red-700 underline" target="_blank">Terms of Service page</a>.
      </p>
    </div>

    <!-- Acceptance Form -->
    <div class="border-t border-stone-200 pt-8">
      <%= form_with url: terms_acceptance_path, method: :patch, local: true, class: "space-y-6" do |form| %>
        <div class="bg-stone-50 p-6 rounded-lg">
          <div class="flex items-start">
            <div class="flex h-5 items-center">
              <%= form.check_box :terms_accepted, { required: true, class: "h-4 w-4 rounded border-stone-300 text-red-600 focus:ring-red-600" }, "1", "0" %>
            </div>
            <div class="ml-3 text-sm">
              <%= form.label :terms_accepted, class: "font-medium text-stone-900" do %>
                I have read, understood, and agree to be bound by these Terms of Service (Version <%= @current_terms_version %>)
              <% end %>
              <p class="text-stone-600 mt-1">
                By checking this box, you accept the updated Terms of Service and acknowledge that they replace any previous version you may have accepted.
              </p>
            </div>
          </div>
        </div>

        <div class="flex justify-between items-center">
          <%= link_to "View Full Terms", terms_of_service_path, class: "text-stone-600 hover:text-stone-700 underline", target: "_blank" %>
          
          <div class="flex gap-4">
            <%= link_to "Sign Out", destroy_session_path, method: :delete, 
                class: "px-4 py-2 text-sm font-medium text-stone-700 bg-white border border-stone-300 rounded-md hover:bg-stone-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" %>
            
            <%= form.submit "Accept Terms", 
                class: "px-6 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>